webpackJsonp([1],{168:function(t,e,o){"use strict";function a(t){c||o(188)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(190),n=o.n(r),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",{staticClass:"matrix-login"},[t._m(0),t._v(" "),t._m(1),t._v(" "),o("tr",[o("td"),t._v(" "),o("td",{staticStyle:{"text-align":"right"}},[o("button",{staticClass:"button btn--blue",attrs:{type:"button"},on:{click:t.matrixLogin}},[t._v("Login")])])])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",[t._v("Username")]),t._v(" "),o("td",[o("input",{staticClass:"input--border",attrs:{type:"text",id:"username"}})])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",[t._v("Password")]),t._v(" "),o("td",[o("input",{staticClass:"input--border",attrs:{type:"password",id:"password"}})])])}];i._withStripped=!0;var l={render:i,staticRenderFns:s},m=l,c=!1,u=o(1),d=a,p=u(n.a,m,!1,d,null,null);p.options.__file="src/components/matrix-login.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},188:function(t,e,o){var a=o(189);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(3)("73030a90",a,!1)},189:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"",""])},190:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},r=o(0);e.default={methods:a({},(0,r.mapActions)(["loginMatrixWithPassword"]),{matrixLogin:function(){var t=this.$el.querySelector("#username"),e=this.$el.querySelector("#password");this.loginMatrixWithPassword({username:t.value,password:e.value}),this.$el.querySelector("#username").value="",this.$el.querySelector("#password").value=""}})}},329:function(t,e,o){var a=o(330);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(3)("754bd56c",a,!1)},33:function(t,e,o){"use strict";function a(t){c||o(329)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(331),n=o.n(r),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"matrix-room play-list-manager__wrapper"},[t.matrixEnabled&&!t.matrixLoggedIn?o("div",{staticClass:"matrix-room__logging-in"},[t._v("\n\t\t  … connecting to Matrix\n\t")]):t._e(),t._v(" "),t.matrixEnabled?t._e():o("div",{staticClass:"play-list-manager__enable-matrix"},[o("a",{attrs:{href:"https://matrix.org/",target:"_blank"}},[t._v("Matrix")]),t._v(" is a chat network that allows you to share music and videos with your friends. Press the button to create a guest user and join Matrix.\n\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("button",{staticClass:"button btn--blue",attrs:{type:"button"},on:{click:function(e){t.setMatrixEnabled(),t.initMatrix()}}},[t._v("Join Matrix")])]),t._v(" "),t.matrixLoggedIn&&!t.matrixRoomsOrdered.length?o("div",{staticClass:"play-list-manager__room-suggestions"},[t._v("\n\t\tYou did not join any rooms yet!\n\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("button",{staticClass:"button btn--blue",on:{click:function(e){t.toggleMatrixRoomDirectory()}}},[o("span",{staticClass:"wmp-icon-format_list_bulleted"}),t._v("\n\t\t\trooms\n\t\t")]),t._v(" "),o("br"),t._v(" "),o("br"),t._v("\n\t\tOpen the room list\n\t\tor\n\t\tcreate your own room.\n\t")]):t._e(),t._v(" "),o("matrix-create-room"),t._v(" "),o("matrix-public-rooms"),t._v(" "),t.showMatrixLoginModal?o("div",{staticClass:"modal",on:{click:function(e){t.toggleMatrixLoginModal()}}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[t._v("\n\t\t\tYou are a guest user. Guest users are not allowed to join this room. Create a full accound with\n\t\t\t"),o("a",{attrs:{href:"https://riot.im/app/#/room/#audius:matrix.org",target:"_blank"}},[t._v("Riot")]),t._v("\n\t\t\tor "),o("a",{attrs:{href:"https://matrix.org/docs/projects/try-matrix-now.html#clients",target:"_blank"}},[t._v("another client")]),t._v(" and login below.\n\t\t\t"),o("matrix-login")],1)]):t._e(),t._v(" "),o("draggable",{staticClass:"matrix-room__tags",attrs:{element:"ul",options:{animation:150,scrollSpeed:20,handle:".play-list-manager__drag-handle"}},model:{value:t._matrixRoomsOrdered,callback:function(e){t._matrixRoomsOrdered=e},expression:"_matrixRoomsOrdered"}},t._l(t._matrixRoomsOrdered,function(e){return o("draggable",{key:e,staticClass:"play-list-manager__tag-drop-zone",class:{active:t.currentMatrixRoom==e},attrs:{element:"li",options:{sort:!1,handle:".no-handle",group:{name:"lists"}}},on:{add:function(o){t.dropAdd(o,e)}}},[o("div",{staticClass:"play-list-manager__drag-handle"}),t._v(" "),o("div",{staticClass:"play-list-manager__tag-body",on:{click:function(o){t.selectMediaSource({type:"radio",id:e})}}},[o("div",[t._v("\n\t\t\t\t\t"+t._s(t.matrixRooms[e].name)+"\n\t\t\t\t")]),t._v(" "),o("div",[t._v("\n\t\t\t\t\t"+t._s(t.matrixRooms[e].playList.length-Object.keys(t.matrixRooms[e].playedMedia).length)+" New\n\t\t\t\t\t"+t._s(t.numWatched(e))+" Watched\n\t\t\t\t")])]),t._v(" "),o("div",{staticClass:"play-list-manager__menu"},[o("span",{staticClass:"wmp-icon-mode_edit",attrs:{title:"Edit room"},on:{click:function(o){o.stopPropagation(),t.setShowMediumSettings({medium:"matrix",id:e})}}}),t._v(" "),o("span",{staticClass:"wmp-icon-close",attrs:{title:"Leave room"},on:{click:function(o){o.stopPropagation(),t.showConfirmDelte=e}}})])])})),t._v(" "),o("ul",{staticClass:"matrix-room__tags"},[t.matrixLoggedIn?o("li",{staticClass:"play-list-manager__input"},[o("div",{staticClass:"play-list-manager__tag-body"},[o("input",{attrs:{type:"text",placeholder:"… room id or name"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.addMatrixRoom(e)}}})]),t._v(" "),o("div",{staticClass:"matrix-room__room-join-create"},[o("span",{staticClass:"wmp-icon-add",attrs:{title:"Create / join room"},on:{click:t.addMatrixRoom}})]),t._v(" "),o("div",{staticClass:"matrix-room__room-list"},[o("span",{staticClass:"wmp-icon-format_list_bulleted",attrs:{title:"Room List"},on:{click:function(e){t.toggleMatrixRoomDirectory()}}})])]):t._e()]),t._v(" "),t.showConfirmDelte?o("div",{staticClass:"modal",on:{click:function(e){t.showConfirmDelte=!1}}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[t._v("\n\t\t\tAre you sure you want to leave the room?\n\t\t\t"),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:function(e){t.showConfirmDelte=!1}}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue",on:{click:function(e){e.stopPropagation(),t.leaveMatrixRoom(t.showConfirmDelte),t.showConfirmDelte=!1}}},[t._v("Leave")])])])]):t._e()],1)},s=[];i._withStripped=!0;var l={render:i,staticRenderFns:s},m=l,c=!1,u=o(1),d=a,p=u(n.a,m,!1,d,null,null);p.options.__file="src/components/matrix-room-manager.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},330:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-room__menu {\n  display: none;\n}\n.matrix-room {\n  color: #fff;\n}\n.matrix-room .modal__body {\n    color: #707379;\n}\n.matrix-room__room-join-create:before,\n.matrix-room__room-list:before {\n  position: absolute;\n  transform: rotate(-53.4deg);\n  transform-origin: 5.8rem 3.5rem;\n  font-size: 0.8rem;\n  color: #E2E4E9;\n  pointer-events: none;\n}\n.matrix-room__room-list:before {\n  content: 'ROOMS';\n}\n.matrix-room__room-join-create:before {\n  content: 'CREATE';\n}\n.matrix-room__logging-in,\n.play-list-manager__enable-matrix {\n  width: 100%;\n  text-align: center;\n  padding: 0 0.45rem;\n  margin-top: 3.15rem;\n}\n.play-list-manager__room-suggestions {\n  margin: 0.45rem;\n  text-align: center;\n}\n.play-list-manager__room-suggestions span {\n    text-decoration: underline;\n    cursor: pointer;\n}\n.play-list-manager__room-suggestions > button.button {\n    padding: 0 0.9rem;\n    display: inline-flex;\n    align-items: center;\n}\n.play-list-manager__room-suggestions > button.button > span {\n      margin-right: 0.9rem;\n}\n",""])},331:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},n=o(0),i=o(7),s=a(i),l=o(332),m=a(l),c=o(337),u=a(c),d=o(168),p=a(d);e.default={components:{draggable:s.default,MatrixCreateRoom:m.default,MatrixPublicRooms:u.default,MatrixLogin:p.default},data:function(){return{showConfirmDelte:!1}},created:function(){this.matrixEnabled&&this.initMatrix()},methods:r({},(0,n.mapMutations)(["setMatrixEnabled","selectMediaSource","movematrixRoomsOrdered","setShowMediumSettings","toggleMatrixRoomModal","toggleMatrixRoomDirectory","toggleMatrixLoginModal","error"]),(0,n.mapActions)(["joinMatrixRoom","leaveMatrixRoom","matrixSend","initMatrix"]),{addMatrixRoom:function(){var t=document.querySelector(".matrix-room input");/#[\w-]+:[\w-]+\.\w{2,}/.test(t.value)?this.joinMatrixRoom({id:t.value}):this.toggleMatrixRoomModal(t.value||!0),t.value=""},dropAdd:function(t,e){var o=t.item.dataset.id;this.matrixSend({roomId:e,itemId:o})},numWatched:function(t){return t in this.matrixRooms?(this.matrixRooms[t].archive?this.matrixRooms[t].archive.length:0)+Object.keys(this.matrixRooms[t].playedMedia).length:0}}),computed:r({},(0,n.mapState)(["matrixEnabled","matrixRooms","currentMatrixRoom","matrixRoomsOrdered","matrixRooms","matrixLoggedIn","showMatrixLoginModal"]),{_matrixRoomsOrdered:{get:function(){return this.matrixRoomsOrdered},set:function(t){this.moveRoomsOrdered(t)}}})}},332:function(t,e,o){"use strict";function a(t){c||o(333)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(335),n=o.n(r),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.createMatrixRoomModal?o("div",{staticClass:"modal matrix-create",on:{click:t.close}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[!1!==t.matrix.isGuest?o("div",[t._v("\n\t\t\tYou are a guest user. Guest users are not allowed to create rooms. Create a full accound with\n\t\t\t\t"),o("a",{attrs:{href:"https://riot.im/app/#/room/#audius:matrix.org",target:"_blank"}},[t._v("Riot")]),t._v("\n\t\t\t\tor "),o("a",{attrs:{href:"https://matrix.org/docs/projects/try-matrix-now.html#clients",target:"_blank"}},[t._v("another client")]),t._v(" and login below.\n\t\t\t"),o("p",[o("matrix-login")],1)]):o("div",[o("h3",[t._v("Create matrix room")]),t._v(" "),o("p"),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],staticClass:"input--border",attrs:{type:"text",placeholder:"Room name"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"spacer"}),t._v("\n\t\t\t\t#"+t._s(t.slugName)+":matrix.org\n\t\t\t"),o("p"),t._v(" "),o("p"),t._m(0),t._v(" "),o("p"),t._v(" "),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue",attrs:{disabled:t.roomName.length<5,title:t.roomName.length<5?"The room name must be at least 5 characters long":""},on:{click:t._createMatrixRoom}},[t._v("create")])])])])]):t._e()},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{attrs:{type:"checkbox",id:"hidden-room-m"}}),o("label",{attrs:{for:"hidden-room-m"}}),t._v("\n\t\t\t\t\tHidden\n\t\t\t\t\t"),o("span",{staticClass:"smaller"},[t._v("Not publicly listed")])])}];i._withStripped=!0;var l={render:i,staticRenderFns:s},m=l,c=!1,u=o(1),d=a,p=u(n.a,m,!1,d,null,null);p.options.__file="src/components/matrix-create-room.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},333:function(t,e,o){var a=o(334);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(3)("451fa803",a,!1)},334:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-create input {\n  width: 100%;\n  margin-bottom: 0.45rem;\n}\n",""])},335:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},r=o(0),n=o(336),i=o(168),s=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={components:{MatrixLogin:s.default},data:function(){return{roomName:""}},created:function(){var t=this;this.$store.watch(function(t){return t.createMatrixRoomModal},function(){"string"==typeof t.createMatrixRoomModal&&(t.roomName=t.createMatrixRoomModal)})},methods:a({},(0,r.mapActions)(["createMatrixRoom"]),(0,r.mapMutations)(["toggleMatrixRoomModal"]),{close:function(){this.toggleMatrixRoomModal(!1)},_createMatrixRoom:function(){var t=this.$el.querySelector("#hidden-room-m").checked?"privat":"public";this.createMatrixRoom({room_alias_name:this.slugName,visibility:t,name:this.roomName+" [Audius]",topic:"Join this room at https://audius.rockdapus.org?import=#"+this.slugName+":matrix.org&type=room&title="+encodeURIComponent(this.roomName)})},matrixLogin:function(){var t=this.$el.querySelector("#username"),e=this.$el.querySelector("#password");this.loginMatrixWithPassword({username:t.value,password:e.value}),this.$el.querySelector("#username").value="",this.$el.querySelector("#password").value=""}}),computed:a({},(0,r.mapState)(["createMatrixRoomModal","matrix"]),(0,r.mapGetters)(["tagNames"]),{slugName:function(){return this.roomName.length<5?"…":(0,n.slugify)(this.roomName).slice(0,20).replace(/-$/,"")+"-audius"}})}},336:function(t,e,o){"use strict";function a(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",o="aaaaaeeeeeiiiiooooouuuunc------",a=0,r=e.length;a<r;a++)t=t.replace(new RegExp(e.charAt(a),"g"),o.charAt(a));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}Object.defineProperty(e,"__esModule",{value:!0}),e.slugify=a},337:function(t,e,o){"use strict";function a(t){c||o(338)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(340),n=o.n(r),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showMatrixRoomDirectory?o("div",{staticClass:"modal matrix-public-rooms",on:{click:t.close}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[o("h3",[t._v("Public rooms")]),t._v(" "),t.matrix.publicRooms&&t.matrix.publicRooms.length?t._e():o("div",{staticClass:"about-player__community-btns"},[o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!zKinTrtpQEyHfnIbnI:matrix.org&type=room&title=Random"}},[t._v("Random")]),t._v(" "),o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!VTIhlnDdHsxZFZQNFh:matrix.org&type=room&title=Rock"}},[t._v("Rock")]),t._v(" "),o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!sgKmJzakMmEdSCgKCE:matrix.org&type=room&title=Electronic"}},[t._v("Electronic")])]),t._v(" "),t.matrix.publicRooms&&t.matrix.publicRooms.length?t._e():o("div",[o("br"),t._v("\n\t\t\t… press below to update rooms, it might take a while.\n\t\t")]),t._v(" "),o("div",{staticClass:"matrix-public-rooms__buttons"},t._l(t.matrix.publicRooms,function(e){return o("a",{staticClass:"button btn--blue",attrs:{title:"["+e.numberOfMembers+" Members] "+e.topic,href:"?import="+e.id+"&type=room&title="+encodeURIComponent(e.name)}},[t._v("\n\t\t\t\t"+t._s(e.name)+"\n\t\t\t")])})),t._v(" "),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue-ghost",on:{click:t.updatePublicRooms}},[t._v("update room list")])])])]):t._e()},s=[];i._withStripped=!0;var l={render:i,staticRenderFns:s},m=l,c=!1,u=o(1),d=a,p=u(n.a,m,!1,d,null,null);p.options.__file="src/components/matrix-public-rooms.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},338:function(t,e,o){var a=o(339);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(3)("9126cbac",a,!1)},339:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-create input {\n  width: 100%;\n  margin-bottom: 0.45rem;\n}\n.matrix-public-rooms__buttons {\n  display: flex;\n  flex-wrap: wrap;\n}\n.matrix-public-rooms__buttons > * {\n    margin: 0 0.45rem 0.45rem 0;\n}\n",""])},340:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},r=o(0);e.default={methods:a({},(0,r.mapActions)(["updatePublicRooms"]),(0,r.mapMutations)(["toggleMatrixRoomDirectory"]),{close:function(){this.toggleMatrixRoomDirectory(!1)}}),computed:a({},(0,r.mapState)(["showMatrixRoomDirectory","matrix"]))}}});